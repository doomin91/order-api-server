# 시작하면서
안녕하세요 지원자 여러분! 세특 nodejs 과제 테스트에 참여 해주셔서 감사 드립니다. 해당 과제는 세특 앱에서 활용 하고 있는 "문제 의류 접수" 화면의 API를 작성 하는 프로젝트 입니다. 각 컴포넌트들을 잘 구조화 활 수 있는지, OOP 기반의 프로그래밍을 하실 수 있는지 또 지금은 작은 프로젝트라도 확장성이 고려된 프로젝트를 완성 시킬 수 있는지? 를 파악하는 것에 목적으로 두고 있습니다. 프로젝트 구조화에 신경 써주셨으면 좋겠습니다.

**해당 프로젝트 clone 후 새롭게 작성 해주세요.**
기타 자세한 프로젝트 설명과 과제에 대한 내용은 [노션페이지](https://washswat.notion.site/NodeJS-a16cd2078a3c4b38a7e8df6de875e890 "노션페이지")를 참고 해주세요.


------------

# 세탁특공대 의류 접수앱
세특 고객들이 의류를 선택 해서 주문을 만들 수 있는 앱 입니다.

# Dev Library
매 번 재실행하는 것은 고역입니다. 따라서 수정 시 갱신하도록 nodemon 라이브러리를 추가하였습니다.

# Basic authentication
별도의 아이디어가 없습니다.

# API token
기존 구조는 /api/user를 통해 로그인 인증정보 생성 시 x-access-token이 있어야만 신청을 할 수 있는 형태입니다.
token을 받기 위해 token 을 받아야하는 형태로 되어 있으므로 해당 부분을 일부 변경하고자 합니다.
또한 이미 발급받은 token이 있어도 token을 계속 발급 받을 수 있는 구조로 되어있어 서버 리소스를 크게 차지 할 수 있는 점도 문제가 됩니다.

/api/user 의 기능을 다음과 같이 정의합니다.
1) 어떤 세션 또는 쿠키를 가지지 않는 사용자(브라우저)가 전화번호 인증을 통해 인증정보를 받는다.
2) 전화번호 인증은 { "phone": "010-0000-0000" } 등의 파라미터를 넘기는 것으로 생략한다. 
실제론 로직이 더 필요하나 구현이 필요하다고 하지 않았으므로 전화번호를 넘기면 모든 일련의 인증절차를 마친 것으로 판단한다.

그렇다면 최초 /api/user는 x-access-token이 없어도 token을 받을 수 있는 상태로 변경해야 합니다.
이후 token을 받은 상태에서 요청하는 경우 JWT 인증을 통해 token이 만료되지 않았다면 "이미 로그인 되어있습니다" 등으로 처리해줍니다.

# Request format
프론트에서의 요청 값은 기본적으로 JSON으로 진행합니다.
XML, TEXT, PARAMETER 등으로도 진행 할 수 있으나, 최근 프론트엔드 프레임워크 Vue, React 등의 경우 JSON으로 작업하기가
가장 용이하다고 판단되어 JSON을 선택했습니다.

각 요청값은 다르게 들어올 수 있습니다. 보통 싱글 프로세스로 서버를 운영하게 되는 express의 경우 예외처리가 잘못되면
서버가 종료 될 가능성이 존재하므로 최대한 형식에 맞는 값을 받고자 합니다.
이에 유용한 라이브러리인 express-validate를 활용하려고 합니다.

# Response format
위 사항과 마찬가지로 JSON 형태로 작업하였습니다.

# DB Structure
과제 특성상 SQLite3를 사용했으므로, 현재 샘플데이터(JSON) 형식으로 생성 및 삭제하기가 쉽지 않을 것으로 판단됩니다.
조회와 검색을 용이하게 하기 위해 Order의 경우는 Infomation, Mission, Mission이 가지는 아이템 리스트로 테이블을 나누어 저장하고
Relation을 통해 데이터를 조합해 JSON 형태로 프론트에 전달 할 계획을 가지고 구성했습니다.

# API Specifications
http(s)://{server_ip}/api-docs 에서 API 명세서를 확인 할 수 있습니다.
예) http://localhost/api-docs

API 명세서는 Postman과 같은 강력한 툴을 사용하더라도 매 번 수동으로 갱신한다는 일이 쉽지 않습니다.

이에 Swagger와 같은 자동 문서화가 되는 라이브러리를 사용하여 매 번 최신화된 명세서를 전달하려고 합니다.
현재 프로젝트는 MSA 개발 방식을 따르고 있는 것으로 보여, schema와 route를 하나의 폴더에 넣고 개발하는 것보다는
api 내의 각 모듈별로 schema를 가지는게 좋겠다고 판단하였습니다.

모듈 내에 schema.ymal를 swagger 형식에 맞게 입력하면 자동으로 문서화가 되는 개념으로 진행했습니다.

# 시간이 있다면... 향후 변경사항
better-sql3는 완전 동기화이므로 동기화 처리가 가능한 RDB 또는 NoSql을 활용하고자 합니다.
